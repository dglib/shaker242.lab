apiVersion: redhatcop.redhat.io/v1alpha1
kind: QuayEcosystem
metadata:
  name: quay-ecosystem
spec:
  quay:
    keepConfigDeployment: true
    # external hostname, in dns and tls
    hostname: quay.redcloud.land
    # external mapping for the configuration page - here we'll setup LDAP and deselect Docker V1 support to allow it
    configHostname: quayconfig.apps.openshift.redcloud.land
    imagePullSecretName: redhat-pull-secret
    sslCertificatesSecretName: custom-quay-ssl
    # registryBackends:
    #   - name: rhocs
    #     rhocs:
    #       hostname: s3.openshift-storage.svc
    #       # secure: true
    #       accessKey: 5WoGHLMc7bttzoNY3OXg
    #       secretKey: Ega35e/QjsdigCJcRe/KlmrA96cgztpBkqXH/MoM
    #       bucketName: quaystore
    resources:
      requests:
        memory: 1000Mi
    livenessProbe:
      initialDelaySeconds: 120
      httpGet:
        path: /health/instance
        port: 8443
        scheme: HTTPS
    readinessProbe:
      initialDelaySeconds: 10
      httpGet:
        path: /health/instance
        port: 8443
        scheme: HTTPS
    database:
      volumeSize: 10Gi
    configFiles:
      - secretName: ca-redcloud
        type: extraCaCert
  clair:
    enabled: true
    imagePullSecretName: redhat-pull-secret
    updateInterval: "60m"